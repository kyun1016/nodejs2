<form action="/email_post"  method="post">
  email : <input type="text" name="email">
  <input type="submit">
</form>


<!-- https://gomdoreepooh.github.io/notes/ajax-by-nodejs -->
<button class="ajaxsend">ajaxsend</button>

<script>
  document.querySelector('.ajaxsend').addEventListener('click', function(){
    // 입력값 위치를 찾아 변수에 담고
    var inputdata = document.forms[0].elements[0].value;
    // sendAjax 함수를 만들고 URL과 data를 전달
    sendAjax('http://127.0.0.1:3000/ajax_send_email', inputdata)
  })
</script>


<script>
function sendAjax(url, data){

  // 입력값을 변수에 담고 문자열 형태로 변환
  var data = {'email' : data};
  data = JSON.stringify(data);

  // content-type을 설정하고 데이터 송신
  var xhr = new XMLHttpRequest();
  xhr.open('POST', url);
  xhr.setRequestHeader('Content-type', "application/json");
  xhr.send(data);

  // 데이터 수신이 완료되면 표시
  xhr.addEventListener('load', function(){
    console.log(xhr.responseText);
  });
}
</script>
